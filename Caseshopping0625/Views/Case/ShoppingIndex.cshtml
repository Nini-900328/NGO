@model List<Caseshopping0625.Models.CaseShoppingItem>

<!-- 標題與說明區塊樣式2-->
<!-- 無滿版背景 -->
@* <div class="container-fluid">
    <!-- 標題與說明區塊 -->
    <div class="bg-success bg-opacity-25 text-center p-4 mb-4  w-100">
        <h3 class="text-success fw-bold">物資選購</h3>
        <p class="text-secondary">數量有限，登記時以 1 份為單位。</p>
    </div>
</div> *@

<!-- 標題與說明區塊 -->
<!-- 滿版背景 -->
<div class="bg-success bg-opacity-25 py-4 mb-4">
    <div class="container text-center">
        <h3 class="text-success fw-bold">物資選購</h3>
        <p class="text-secondary">數量有限，登記時以 1 份為單位。</p>
    </div>
</div>

<div class="container">
    <div class="mb-4">
        <div class="d-flex flex-wrap justify-content-center align-items-center gap-2">
            <input type="text" class="form-control search-box" placeholder="搜尋物資名稱…" />

            <a asp-action="ShoppingIndex" class="btn btn-outline-success">全部</a>
            <a asp-action="ShoppingIndex" asp-route-category="食品" class="btn btn-outline-success">食品</a>
            <a asp-action="ShoppingIndex" asp-route-category="衣服" class="btn btn-outline-secondary">衣服</a>
            <a asp-action="ShoppingIndex" asp-route-category="醫療保健" class="btn btn-outline-secondary">醫療保健</a>
            <a asp-action="ShoppingIndex" asp-route-category="清潔防疫" class="btn btn-outline-secondary">清潔防疫</a>
            <a asp-action="ShoppingIndex" asp-route-category="文具教育" class="btn btn-outline-secondary">文具教育</a>
        </div>
    </div>
</div>


    <!-- 商品卡片 -->
    <div class="row ">
        @foreach (var item in Model)
        {
            <div class="mb-4 mx-2 search-card" style="width: 18rem;">
                <div class="card h-100 shadow-sm search-card">
                    <img src="@item.ImageUrl" class="card-img-top" alt="@item.Name" />
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title ">@item.Name</h5>
                        <p class="card-text text-muted">@item.Description</p>
                        <div class="mt-auto">
                            <p class="text-muted small">剩餘數量：50份</p>
                            <button type="button"
                                    class="btn btn-success btn-sm"
                                    data-bs-toggle="modal"
                                    data-bs-target="@($"#infoModal{item.Id}")">
                                領取物資
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal 彈窗 -->
            <div class="modal fade" id="infoModal@(item.Id)" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">@item.Name</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">確定要領取 @item.Name 嗎？
                            <button type="button" class="text-bg-success rounded" data-bs-dismiss="modal">
                                確認
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
<!--搜尋功能加上filter-->
@section Scripts {
    <script>
        $(document).ready(function () {
            $(".search-box").on("keyup", function () {
                var value = $(this).val().toLowerCase();
                $(".search-card").each(function () {
                    const text = $(this).text().toLowerCase();
                    $(this).toggle(text.includes(value));
                });
            });
        });
    </script>
}